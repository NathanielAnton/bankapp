<div class="container">
  <!-- Header -->
  <div class="header">
    <h1>üè¶ Tableau de Bord</h1>
    <p>Bienvenue dans votre espace bancaire personnel, <strong style="text-transform: uppercase;">{{ username }}</strong></p>
  </div>

  <!-- Summary Cards -->
  <div class="summary">
    <div class="summary-card">
      <h3>Solde Total</h3>
      <div class="value">{{ getTotalBalance() }} ‚Ç¨</div>
      <div class="subtitle">Tous comptes confondus</div>
    </div>
    <div class="summary-card">
      <h3>Nombre de Comptes</h3>
      <div class="value">{{ accounts.length }}</div>
      <div class="subtitle">Comptes actifs</div>
    </div>
    <div class="summary-card">
      <h3>Derni√®re Activit√©</h3>
      <div class="value">Aujourd'hui</div>
      <div class="subtitle">{{ getCurrentTime() }}</div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="accounts.length === 0" class="loading">
    <div class="spinner"></div>
    <p>Chargement de vos comptes...</p>
  </div>
  
   <!-- Actions Section -->
  <div class="actions-section" *ngIf="accounts.length > 0">
    <button class="btn btn-success" (click)="openCreateModal()">
      ‚ûï Cr√©er un Nouveau Compte
    </button>
  </div>

  <!-- Modal de cr√©ation de compte -->
  <div *ngIf="showCreateModal" class="modal-overlay" (click)="closeCreateModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>Cr√©er un Nouveau Compte</h3>
        <button class="close-btn" (click)="closeCreateModal()">&times;</button>
      </div>
      
      <div class="modal-body">
        <form (ngSubmit)="createAccount()">
          <div class="form-group">
            <label for="accountType">Type de Compte:</label>
            <select 
              id="accountType" 
              [(ngModel)]="newAccount.type" 
              name="type"
              class="form-control"
              required
            >
              <option *ngFor="let type of accountTypes" [value]="type.value">
                {{ type.label }}
              </option>
            </select>
          </div>

          <div class="form-group">
            <label for="initialBalance">Solde Initial (‚Ç¨):</label>
            <input 
              type="number" 
              id="initialBalance" 
              [(ngModel)]="newAccount.solde" 
              name="solde"
              class="form-control"
              min="0"
              step="0.01"
              required
            >
          </div>

          <div class="form-group">
            <label for="accountStatus">Statut:</label>
            <select 
              id="accountStatus" 
              [(ngModel)]="newAccount.statut" 
              name="statut"
              class="form-control"
              required
            >
              <option *ngFor="let status of statusOptions" [value]="status.value">
                {{ status.label }}
              </option>
            </select>
          </div>

          <div *ngIf="createError" class="error-message">
            {{ createError }}
          </div>

          <div class="modal-actions">
            <button 
              type="button" 
              class="btn btn-secondary" 
              (click)="closeCreateModal()"
              [disabled]="creatingAccount"
            >
              Annuler
            </button>
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="creatingAccount"
            >
              <span *ngIf="creatingAccount">Cr√©ation...</span>
              <span *ngIf="!creatingAccount">Cr√©er le Compte</span>
            </button>
          </div>
        </form>
      </div>
    </div>
   </div>

  <!-- Accounts Section -->
  <div class="accounts-section" *ngIf="accounts.length > 0">
    <h2 class="section-title">
      üí≥ Mes Comptes Bancaires
    </h2>

    <div class="accounts-grid">
      <div 
        *ngFor="let account of accounts; let i = index" 
        class="account-card"
        [ngClass]="account.type.toLowerCase()"
        [style.animation-delay]="(i * 0.1) + 's'"
      >
        <!-- Header -->
        <div class="account-header">
          <div class="account-type">
            <div class="account-icon">{{ getAccountIcon(account.type) }}</div>
            <div class="account-info">
              <h3>{{ getAccountTypeLabel(account.type) }}</h3>
              <div class="account-number">ID: {{ account.id }}</div>
            </div>
          </div>
          <div 
            class="account-status"
            [ngClass]="'status-' + account.statut.toLowerCase()"
          >
            {{ account.statut }}
          </div>
        </div>

        <!-- Balance -->
        <div class="account-balance">
          <div class="balance-amount">
            {{ account.solde }} ‚Ç¨
          </div>
          <div class="balance-label">Solde Disponible</div>
        </div>

        <!-- Details -->
        <div class="account-details">
          <div class="detail-item">
            <div class="detail-label">Type</div>
            <div class="detail-value">{{ account.type }}</div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Ouverture</div>
            <div class="detail-value">{{ formatDate(account.dateOuverture) }}</div>
          </div>
        </div>

        <!-- Actions -->
        <div class="account-actions">
          <button 
            class="btn btn-primary"
            (click)="handleAccountAction(account, 'transfer')"
          >
            Ajouter une transaction
          </button>
          <button 
            class="btn btn-secondary"
            (click)="handleAccountAction(account, 'history')"
          >
            Historique
          </button>
        </div>
      </div>
    </div>
  </div>
</div>